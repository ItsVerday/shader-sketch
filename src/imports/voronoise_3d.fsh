float voronoise_3d_hash(vec3 A){return fract(1e4*sin(17.*A.x+A.y*0.1)*(0.1+abs(sin(A.y*13.+A.x-A.z))*sin(12.*A.z-sin(A.x*10.))));}vec3 voronoise_3d_hash3d(vec3 A){return vec3(voronoise_3d_hash(A+vec3(0.5,0,0)),voronoise_3d_hash(A+vec3(0,0.5,0)),voronoise_3d_hash(A+vec3(0,0,0.5)));}float voronoise_3d(vec3 A,float B,float C){vec3 D=floor(A);vec3 E=fract(A);float F=1.-C;F=F*F;F=F*F;F=1.+31.*F;float G=0.;float H=0.;for(int I=-2;I<=2;I++){for(int J=-2;J<=2;J++){for(int K=-2;K<=2;K++){vec3 L=vec3(I,J,K);float M=voronoise_3d_hash(D+L);vec3 N=voronoise_3d_hash3d(D+L)*B;vec3 O=L-E+N;float P=dot(O,O);float Q=pow(1.-smoothstep(0.,2.,sqrt(P)),F);G+=Q*M;H+=Q;}}}return G/H;}float fractal_voronoise_3d(vec3 A,float B,float C,int R){float S=0.;float T=0.;float U=1.;float V=1.;for(int W=0;W<10;W++){if(W>=R){break;}S+=voronoise_3d(A*V,B,C)*U;T+=U;U*=.4;V*=2.5;}return S/T;}vec3 curl_voronoise_3d(vec3 A,float B,float C){const float X=0.01;float Y=voronoise_3d(A,B,C);float I=voronoise_3d(A+vec3(X,0.,0.),B,C);float J=voronoise_3d(A+vec3(0.,X,0.),B,C);float K=voronoise_3d(A+vec3(0.,0.,X),B,C);return normalize(vec3(Y-I,Y-J,Y-K));}vec3 curl_fractal_voronoise_3d(vec3 A,float B,float C,int R){const float X=0.01;float Y=fractal_voronoise_3d(A,B,C,R);float I=fractal_voronoise_3d(A+vec3(X,0.,0.),B,C,R);float J=fractal_voronoise_3d(A+vec3(0.,X,0.),B,C,R);float K=fractal_voronoise_3d(A+vec3(0.,0.,X),B,C,R);return normalize(vec3(Y-I,Y-J,Y-K));}