vec4 perlin_noise_4d_permute(vec4 A){return mod(((A*34.)+1.)*A,289.);}vec4 perlin_noise_4d_taylorInvSqrt(vec4 B){return 1.79284291400159-0.85373472095314*B;}vec4 perlin_noise_4d_fade(vec4 C){return C*C*C*(C*(C*6.-15.)+10.);}float perlin_noise_4d(vec4 D){vec4 E=floor(D);vec4 F=E+1.;E=mod(E,289.);F=mod(F,289.);vec4 G=fract(D);vec4 H=G-1.;vec4 I=vec4(E.x,F.x,E.x,F.x);vec4 J=vec4(E.yy,F.yy);vec4 K=vec4(E.zzzz);vec4 L=vec4(F.zzzz);vec4 M=vec4(E.wwww);vec4 N=vec4(F.wwww);vec4 O=perlin_noise_4d_permute(perlin_noise_4d_permute(I)+J);vec4 P=perlin_noise_4d_permute(O+K);vec4 Q=perlin_noise_4d_permute(O+L);vec4 R=perlin_noise_4d_permute(P+M);vec4 S=perlin_noise_4d_permute(P+N);vec4 T=perlin_noise_4d_permute(Q+M);vec4 U=perlin_noise_4d_permute(Q+N);vec4 V=R/7.;vec4 W=floor(V)/7.;vec4 X=floor(W)/6.;V=fract(V)-0.5;W=fract(W)-0.5;X=fract(X)-0.5;vec4 Y=vec4(0.75)-abs(V)-abs(W)-abs(X);vec4 Z=step(Y,vec4(0.));V-=Z*(step(0.,V)-0.5);W-=Z*(step(0.,W)-0.5);vec4 a=S/7.;vec4 b=floor(a)/7.;vec4 c=floor(b)/6.;a=fract(a)-0.5;b=fract(b)-0.5;c=fract(c)-0.5;vec4 d=vec4(0.75)-abs(a)-abs(b)-abs(c);vec4 e=step(d,vec4(0.));a-=e*(step(0.,a)-0.5);b-=e*(step(0.,b)-0.5);vec4 f=T/7.;vec4 g=floor(f)/7.;vec4 h=floor(g)/6.;f=fract(f)-0.5;g=fract(g)-0.5;h=fract(h)-0.5;vec4 i=vec4(0.75)-abs(f)-abs(g)-abs(h);vec4 j=step(i,vec4(0.));f-=j*(step(0.,f)-0.5);g-=j*(step(0.,g)-0.5);vec4 k=U/7.;vec4 l=floor(k)/7.;vec4 m=floor(l)/6.;k=fract(k)-0.5;l=fract(l)-0.5;m=fract(m)-0.5;vec4 n=vec4(0.75)-abs(k)-abs(l)-abs(m);vec4 o=step(n,vec4(0.));k-=o*(step(0.,k)-0.5);l-=o*(step(0.,l)-0.5);vec4 p=vec4(V.x,W.x,X.x,Y.x);vec4 q=vec4(V.y,W.y,X.y,Y.y);vec4 r=vec4(V.z,W.z,X.z,Y.z);vec4 s=vec4(V.w,W.w,X.w,Y.w);vec4 t=vec4(f.x,g.x,h.x,i.x);vec4 u=vec4(f.y,g.y,h.y,i.y);vec4 v=vec4(f.z,g.z,h.z,i.z);vec4 w=vec4(f.w,g.w,h.w,i.w);vec4 x=vec4(a.x,b.x,c.x,d.x);vec4 y=vec4(a.y,b.y,c.y,d.y);vec4 z=vec4(a.z,b.z,c.z,d.z);vec4 AA=vec4(a.w,b.w,c.w,d.w);vec4 AB=vec4(k.x,l.x,m.x,n.x);vec4 AC=vec4(k.y,l.y,m.y,n.y);vec4 AD=vec4(k.z,l.z,m.z,n.z);vec4 AE=vec4(k.w,l.w,m.w,n.w);vec4 AF=perlin_noise_4d_taylorInvSqrt(vec4(dot(p,p),dot(r,r),dot(q,q),dot(s,s)));p*=AF.x;r*=AF.y;q*=AF.z;s*=AF.w;vec4 AG=perlin_noise_4d_taylorInvSqrt(vec4(dot(x,x),dot(z,z),dot(y,y),dot(AA,AA)));x*=AG.x;z*=AG.y;y*=AG.z;AA*=AG.w;vec4 AH=perlin_noise_4d_taylorInvSqrt(vec4(dot(t,t),dot(v,v),dot(u,u),dot(w,w)));t*=AH.x;v*=AH.y;u*=AH.z;w*=AH.w;vec4 AI=perlin_noise_4d_taylorInvSqrt(vec4(dot(AB,AB),dot(AD,AD),dot(AC,AC),dot(AE,AE)));AB*=AI.x;AD*=AI.y;AC*=AI.z;AE*=AI.w;float AJ=dot(p,G);float AK=dot(q,vec4(H.x,G.yzw));float AL=dot(r,vec4(G.x,H.y,G.zw));float AM=dot(s,vec4(H.xy,G.zw));float AN=dot(t,vec4(G.xy,H.z,G.w));float AO=dot(u,vec4(H.x,G.y,H.z,G.w));float AP=dot(v,vec4(G.x,H.yz,G.w));float AQ=dot(w,vec4(H.xyz,G.w));float AR=dot(x,vec4(G.xyz,H.w));float AS=dot(y,vec4(H.x,G.yz,H.w));float AT=dot(z,vec4(G.x,H.y,G.z,H.w));float AU=dot(AA,vec4(H.xy,G.z,H.w));float AV=dot(AB,vec4(G.xy,H.zw));float AW=dot(AC,vec4(H.x,G.y,H.zw));float AX=dot(AD,vec4(G.x,H.yzw));float AY=dot(AE,H);vec4 AZ=perlin_noise_4d_fade(G);vec4 Aa=mix(vec4(AJ,AK,AL,AM),vec4(AR,AS,AT,AU),AZ.w);vec4 Ab=mix(vec4(AN,AO,AP,AQ),vec4(AV,AW,AX,AY),AZ.w);vec4 Ac=mix(Aa,Ab,AZ.z);vec2 Ad=mix(Ac.xy,Ac.zw,AZ.y);float Ae=mix(Ad.x,Ad.y,AZ.x);return(2.2*Ae)/2.+.5;}float fractal_perlin_noise_4d(vec4 Af,int Ag){float Ah=0.;float Ai=0.;float Aj=1.;for(int Ak=0;Ak<10;Ak++){if(Ak>=Ag){break;}Ah+=perlin_noise_4d(Af/Aj)*Aj;Ai+=Aj;Aj*=.5;}return Ah/Ai;}vec4 curl_perlin_noise_4d(vec4 Af){const float Al=0.01;float Am=perlin_noise_4d(Af);float A=perlin_noise_4d(Af+vec4(Al,0.,0.,0.));float An=perlin_noise_4d(Af+vec4(0.,Al,0.,0.));float Ao=perlin_noise_4d(Af+vec4(0.,0.,Al,0.));float Ap=perlin_noise_4d(Af+vec4(0.,0.,0.,Al));return normalize(vec4(Am-A,Am-An,Am-A,Am-Ap));}vec4 curl_fractal_perlin_noise_4d(vec4 Af,int Ag){const float Al=0.01;float Am=fractal_perlin_noise_4d(Af,Ag);float A=fractal_perlin_noise_4d(Af+vec4(Al,0.,0.,0.),Ag);float An=fractal_perlin_noise_4d(Af+vec4(0.,Al,0.,0.),Ag);float Ao=fractal_perlin_noise_4d(Af+vec4(0.,0.,Al,0.),Ag);float Ap=fractal_perlin_noise_4d(Af+vec4(0.,0.,0.,Al),Ag);return normalize(vec4(Am-A,Am-An,Am-A,Am-Ap));}